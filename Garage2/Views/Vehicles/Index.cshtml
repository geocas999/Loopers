@*@model IEnumerable<Garage2.Models.Vehicle>*@

@model IPagedList<Vehicle>

@{
    ViewBag.Title = "Översikt";
}

<h2>Garage 2.0 - Översikt</h2>

<br/>
<div class="Row" style="margin-bottom:54px">  
    <div class="col-md-8" style="padding:8px 0 8px 8px; width:114px; height:36px; font-weight:bold">        
        @Html.ActionLink("Parkera fordon", "Create")      
    </div>
        
    <div class="col-md-4" style="padding-left:0; margin-left:0">
        <form method="get"
                action="@Url.Action("Index")"
                data-tomas-ajax="true"
                data-tomas-target="#searchList">

            <input id="inputRegister1"
                    class="form-control"
                    style="height:34px; width:190px"
                    type="search"
                    name="searchTerm"
                    placeholder="Sök registreringsnummer"
                    data-tomas-autocomplete="@Url.Action("Autocomplete")" />

            @*<input id="inputRegister2" type="submit" value="Garage register" />*@
        </form>
    </div>
   
</div>

<div id="searchList">
    <table class="table">
        <tr>
            <th>
                @Html.ActionLink("Fordonstyp", "Index", new { Sorting = "VehicleType" })
            </th>
            <th>
                @Html.ActionLink("Registreringsnummer", "Index", new { Sorting = "RegNr" })
            </th>
            <th>
                @Html.ActionLink("Parkering påbörjad", "Index", new { Sorting = "StartTime" })
            </th>
            <th>
                @Html.DisplayNameFor(model => model.First().Parked)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model) { 
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.VehicleType)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RegNr)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.StartTime)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Parked)
                </td>
                <td>
                    @Html.ActionLink("Detaljer", "Details", new { id=item.Id }) |
                    @*@Html.ActionLink("Ändra", "Edit", new { id=item.Id }) |*@
                    @Html.ActionLink("Kör ut fordon", "Delete", new { id = item.Id })
                </td>
            </tr>
        }

    </table>

    <div data-tomas-target="#searchList">
        @Html.PagedListPager(Model, page => Url.Action("Index", new { page }),
        PagedListRenderOptions.PageNumbersOnly)
    </div>
    <br />
    
        <div class="col-md-4">
            @{
                if (Request.QueryString["searchTerm"] != null)
                {
                     @Html.ActionLink("TIllbaka till översikt", "Index")
                }
                @*else
                {
                    @Html.ActionLink("Visa historik", "Index", new { show = "all" })
                }*@
            }
        </div>
    
</div>


   